# Events7 Dashboard

A full-stack web dashboard for Analytics teams to define and manage client events for tracking (button clicks, app events, etc.).

- [Technology Stack](#technology)
- [Install](#setup--installation)  
- [Run](#how-to-run-the-dashboard)
- [Testing](#testing)
- [Assumptions](#assumptions-and-decisions)
- [Future improvements](#future-improvements)

## Technology

### Backend
- **NestJS** - Node.js framework (TypeScript)
- **TypeORM** - Database ORM
- **SQLite** - Database (development)
- **Vitest** - Testing framework

### Frontend
- **Vue 3** with TypeScript (Composition API)
- **Vite** - Build tool and dev server
- **TypeScript** - Type safety throughout
- **Native Fetch API** - HTTP requests (no Axios)
- **Vitest** - Unit and integration testing
- **Vue Test Utils** - Vue component testing utilities


## Setup & Installation

### 1. Clone the Repository
```bash
git clone https://github.com/gorazd/events7-dashboard.git
cd events7-dashboard
```

### 2. Install All Dependencies (Recommended)
```bash
npm run install:all     # Installs dependencies for root, frontend, and backend
```

**OR install manually:**

- Backend Setup

```bash
cd backend
npm install
```


- Frontend Setup

```bash
cd frontend
npm install
```

### 3.  Create `.env` file in `backend/` directory:
```env
ADS_API_URL=https://europe-west1-o7tools.cloudfunctions.net/fun7-ad-partner-expertise-test
ADS_API_USER=fun7user
ADS_API_PASS=fun7pass
DATABASE_URL=sqlite://./events.db
NODE_ENV=development
PORT=3001
```

## How to run the dashboard
### Development

#### Option A: Run Both Simultaneously (Recommended)
```bash
npm run dev             # Runs both frontend and backend concurrently
# Frontend: http://localhost:5173
# Backend: http://localhost:3001
```

#### Option B: Run Separately
**Backend (Terminal 1):**
```bash
cd backend
npm run start:dev       # Server will run on http://localhost:3001
```

**Frontend (Terminal 2):**
```bash  
cd frontend
npm run dev             # Application will run on http://localhost:5173
```

### Testing


#### Quick Test Commands (from root directory)
```bash
npm run test:all        # Run all tests (frontend + backend + integration)
npm run test:frontend   # Run frontend tests only (4 tests)
npm run test:backend    # Run backend unit tests only (51 tests)
npm run test:integration # Run integration tests only (20 tests)
```

#### Backend Tests (from backend directory)
```bash
cd backend

npm run test                # Run unit tests (51 tests)
npm run test:watch          # Run unit tests in watch mode  
npm run test:cov            # Run unit tests with coverage report
npm run test:e2e:events     # Run integration tests (20 tests)
```

#### Frontend Tests (from frontend directory)
```bash
npm run test        # Run all tests (4 tests)
npm run test:watch  # Run tests in watch mode
```

## Assumptions and decisions

### **Backend**
- **SQLite for development**: U easily adapted for production databases (PostgreSQL/MySQL)
- **Auto-generated IDs**: Event IDs are auto-generated by the database rather than user-input (original requirement was unclear on ID source)
- **Timestamps Added**: Added `createdAt` and `updatedAt` fields

### **Frontend**
- **TypeScript**
- **Single Page Application**: Implemented as SPA without Vue Router (dashboard scope seemed self-contained)
- **No Authentication System**
- **Native Fetch API**: Used browser's native fetch() instead of Axios for HTTP requests
- **Composition API**: seems it is recommended to use Vue with TypeScript via Composition API

### **Validation and rules**
- **Kebab-Case Convention**: Enforced kebab-case format for event names (e.g., "click-event") - not specified in original but follows best practices
- **Required Fields**: All fields are mandatory with proper validation

### **Testing Strategy**
- **Comprehensive Coverage**: 75 tests covering unit and integration scenarios
- **Pyramid Approach**: Many unit tests (fast), fewer integration tests (slower but realistic)
- **Mocked Dependencies**: External APIs mocked for predictable unit testing
- **Real Database Testing**: Integration tests use in-memory SQLite for real data persistence
- **Validation Testing**: All business rules and edge cases covered
- **TypeScript Testing**: Full type safety maintained in test code

### **API and security**
- **Environment Variables**: Used `.env` files for sensitive configuration (API credentials, database URLs)
- **CORS Configuration**: Added CORS support for local development (frontend on 5173, backend on 3001)
- **Security First**: API credentials only stored on backend, never exposed to frontend


## Future improvements
- **Mobile styles**
- **Column sorting**
...
